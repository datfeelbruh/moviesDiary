databaseChangeLog:
  - preConditions:
      - onFail: CONTINUE
  -  changeSet:
       id:  movie_genres_constraints
       author: sobad
       changes:
         - createTable:
             tableName: movie_genres
             columns:
               - column:
                   name: movie_id
                   type: bigint
                   constraints:
                     nullable: false
                     primaryKey: true
                     primaryKeyName: movie_genresPK
               - column:
                   name: genres_id
                   type: bigint
                   constraints:
                     nullable: false
                     primaryKey: true
                     primaryKeyName: movie_genresPK

         - addForeignKeyConstraint:
             baseColumnNames: movie_id
             baseTableName: movie_genres
             constraintName: FK_MOVIE_GENRES_GENRE_ID_COL
             deferrable: false
             initiallyDeferred: false
             referencedColumnNames: id
             referencedTableName: genres
             validate: true

         - addForeignKeyConstraint:
             baseColumnNames: genres_id
             baseTableName: movie_genres
             constraintName: FK_MOVIE_GENRES_MOVIE_ID_COL
             deferrable: false
             initiallyDeferred: false
             referencedColumnNames: id
             referencedTableName: movies
             validate: true